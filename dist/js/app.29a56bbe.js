(function(t){function e(e){for(var a,r,s=e[0],c=e[1],l=e[2],m=0,d=[];m<s.length;m++)r=s[m],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},o={app:0},i=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loading?n("div"):t.currentNoteType===t.noteTypes.Shopping?n("s-note"):n("m-note")},i=[],r=n("5530"),s=n("2f62"),c={NotYet:0,Already:1},l={Shopping:"1",Memo:"2"},u={1:"购物记录",2:"随手记"},m={CurrentNoteType:"currentNoteType",SeparateMark:"separateMark",CurrentEditingMemo:"currentEditingMemo",MemoList:"memoList",ProcessingMemoId:"processingMemoId"},d={data:function(){return{loading:!0,noteTypes:l}},created:function(){this.loading=!1},computed:Object(r["a"])({},Object(s["c"])(["currentNoteType"]))},v=d,p=n("2877"),f=Object(p["a"])(v,o,i,!1,null,null,null),h=f.exports,b=n("9483");Object(b["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});n("d81d"),n("7db0"),n("b0c0"),n("4de4");var g=n("d4ec"),_=n("bee2"),k=function(){function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.NotYet;Object(g["a"])(this,t),this.name=e,this.expect=n,this._state=o,this._id=a}return Object(_["a"])(t,[{key:"toData",value:function(){return{name:this.name,expect:this.expect}}},{key:"toProcessingData",value:function(){return{name:this.name,expect:this.expect,id:this._id,state:this._state}}},{key:"generateId",value:function(){this._id=1e3*Math.random()}},{key:"id",get:function(){return this._id}},{key:"state",get:function(){return this._state}},{key:"clone",value:function(){return new t(this.name,this.expect,this._id)}},{key:"update",value:function(t){this.name=t.name,this.expect=t.expect}},{key:"purchase",value:function(){this._state=c.Already}},{key:"cancel",value:function(){this._state=c.NotYet}}],[{key:"fromData",value:function(e){var n=new t(e.name,e.expect);return n.generateId(),n}},{key:"fromProcessingData",value:function(e){return new t(e.name,e.expect,e.id,e.state)}}]),t}(),y=function(){function t(e,n){Object(g["a"])(this,t),this.name=e,this.items=n.map((function(t){return k.fromData(t)}))}return Object(_["a"])(t,[{key:"toData",value:function(){return{name:this.name,items:this.items.map((function(t){return t.toData()}))}}},{key:"appendItem",value:function(t){this.items.unshift(t)}},{key:"updateItem",value:function(t){var e=this.items.find((function(e){return e.id===t.id}));e.update(t)}},{key:"removeItem",value:function(t){this.items=this.items.filter((function(e){return e.id!==t.id}))}},{key:"saveCurrent",value:function(){try{localStorage.setItem("current",JSON.stringify(this.toData()))}catch(t){console.log("LocalStorage not available.")}}},{key:"update",value:function(t){this.items=t.items}}],[{key:"fromData",value:function(e){return new t(e.name,e.items)}},{key:"restoreCurrent",value:function(){try{var e=localStorage.getItem("current");return e?t.fromData(JSON.parse(e)):new t("",[])}catch(n){console.log("LocalStorage not available.")}}}]),t}(),S=function(){function t(){Object(g["a"])(this,t)}return Object(_["a"])(t,null,[{key:"getItem",value:function(t){try{return localStorage.getItem(t)}catch(e){return console.error("LocalStorage unavailable.",e),null}}},{key:"setItem",value:function(t,e){try{localStorage.setItem(t,e)}catch(n){console.error("LocalStorage unavailable.",n)}}},{key:"removeItem",value:function(t){try{localStorage.removeItem(t)}catch(e){console.error("LocalStorage unavailable.",e)}}}]),t}();a["a"].use(s["a"]);var T=new s["a"].Store({state:{items:[],templates:[],currentTemplate:y.restoreCurrent(),currentNoteType:null},getters:{items:function(t){return t.items},templates:function(t){return t.templates},currentTemplate:function(t){return t.currentTemplate},currentNoteType:function(t){return t.currentNoteType||(t.currentNoteType=S.getItem(m.CurrentNoteType)),t.currentNoteType||(t.currentNoteType=l.Shopping,S.setItem(m.CurrentNoteType,t.currentNoteType)),t.currentNoteType}},mutations:{setTemplates:function(t,e){t.templates=e.map((function(t){return y.fromData(t)}))},saveCurrentTemplate:function(t){var e=t.templates.find((function(e){return e.name===t.currentTemplate.name}));e?e.update(t.currentTemplate):t.templates.push(t.currentTemplate);try{localStorage.setItem("templates",JSON.stringify(t.templates.map((function(t){return t.toData()}))))}catch(n){console.log("LocalStorage not available.")}},removeTemplate:function(t,e){t.templates=t.templates.filter((function(t){return t.name!==e.name}));try{localStorage.setItem("templates",JSON.stringify(t.templates.map((function(t){return t.toData()}))))}catch(n){console.log("LocalStorage not available.")}},setNoteType:function(t,e){t.currentNoteType=e,S.setItem(m.CurrentNoteType,t.currentNoteType)}},actions:{loadTemplates:function(t){var e=t.commit;try{var n=localStorage.getItem("templates");n&&e("setTemplates",JSON.parse(n))}catch(a){console.log("LocalStorage not available.")}},saveCurrentTemplate:function(t){var e=t.commit;e("saveCurrentTemplate")},removeTemplate:function(t,e){var n=t.commit;n("removeTemplate",e)},setNoteType:function(t,e){var n=t.commit;n("setNoteType",e)}},modules:{}}),x=n("f309"),M=n("f531");a["a"].use(x["a"]);var I=new x["a"]({lang:{locales:{zhHans:M["a"]},current:"zhHans"}}),D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app-bar",{attrs:{app:"",dark:t.dark,color:t.color}},[t._t("header-content")],2)},w=[],C={name:"Header",props:["color","dark"]},V=C,O=n("6544"),N=n.n(O),j=n("40dc"),L=Object(p["a"])(V,D,w,!1,null,null,null),P=L.exports;N()(L,{VAppBar:j["a"]});var E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-footer",{attrs:{app:""}},[t._t("footer-content")],2)},A=[],H={},J=H,B=n("553a"),F=Object(p["a"])(J,E,A,!1,null,null,null),$=F.exports;N()(F,{VFooter:B["a"]});var q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-main",[t._t("content")],2)},R=[],Y={},Z=Y,z=n("f6c4"),U=Object(p["a"])(Z,q,R,!1,null,null,null),G=U.exports;N()(U,{VMain:z["a"]});var K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"app"}},[n("qnote-header",{attrs:{color:"deep-purple",dark:""},scopedSlots:t._u([{key:"header-content",fn:function(){return[n("v-toolbar-title",[t._v(t._s(t.appTitle))]),n("v-spacer"),n("note-type-switch"),t.tab===t.tabSelections.First?n("v-btn",{attrs:{icon:"",fab:""},on:{click:function(e){return t.jumpTo(t.tabSelections.Zero)}}},[n("v-icon",[t._v("mdi-history")])],1):t.tab===t.tabSelections.Zero?n("v-btn",{attrs:{icon:"",fab:""},on:{click:function(e){return t.jumpTo(t.tabSelections.First)}}},[n("v-icon",[t._v("mdi-arrow-right")])],1):t._e()]},proxy:!0}])}),n("qnote-content",{scopedSlots:t._u([{key:"content",fn:function(){return[n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-card",{attrs:{flat:""}},[n("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("v-tab-item",{attrs:{value:t.tabSelections.Zero}},[n("v-expansion-panels",t._l(t.histories,(function(e,a){return n("v-expansion-panel",{key:a},[n("v-expansion-panel-header",{on:{click:function(n){return t.selectHistory(e)}}},[t._v(" "+t._s(e.time)+" ")]),n("v-expansion-panel-content",[n("v-card",{attrs:{flat:""}},[n("v-card-actions",{staticClass:"pt-0"},[n("v-spacer"),n("v-btn",{attrs:{color:"error",small:""},on:{click:function(e){return t.deleteHistory(a)}}},[t._v(" 删除 ")])],1),n("v-sheet",{attrs:{elevation:"10",rounded:"xl"}},[n("div",{staticClass:"pa-4"},t._l(e.items,(function(e){return n("v-chip",{key:e.id,staticClass:"mr-2 my-2",attrs:{color:"primary"}},[t._v(" "+t._s(e.name)+" "),n("v-divider",{staticClass:"mx-2",attrs:{vertical:""}}),t._v(" "+t._s(e.expect)+" ")],1)})),1)])],1)],1)],1)})),1),n("v-dialog",{attrs:{persistent:""},model:{value:t.historyDeleteConfirm,callback:function(e){t.historyDeleteConfirm=e},expression:"historyDeleteConfirm"}},[n("v-card",{attrs:{flat:""}},[n("v-card-title",[t._v(" 确认删除？ ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"secondary"},on:{click:t.cancelDeleteHistory}},[t._v(" 取消 ")]),n("v-btn",{attrs:{text:"",color:"error"},on:{click:t.doDeleteHistory}},[t._v(" 删除 ")])],1)],1)],1)],1),n("v-tab-item",{attrs:{value:t.tabSelections.First}},[n("v-container",{attrs:{fluid:""}},[n("v-row",[t._l(t.currentTemplate.items,(function(e){return[n("v-card",{key:e.id,staticClass:"ml-2 mb-2",attrs:{"min-width":"100"}},[n("v-card-text",{staticClass:"pb-1",on:{click:function(n){return t.selectItem(e)}}},[t._v(" "+t._s(e.expect)+": "+t._s(e.name)+" ")]),n("v-card-actions",{staticClass:"pt-1"},[n("v-btn",{attrs:{icon:"","x-small":""},on:{click:function(n){return n.stopPropagation(),t.editItem(e)}}},[n("v-icon",[t._v("mdi-pencil")])],1),n("v-spacer"),t.planItems.some((function(t){return t.id===e.id}))?n("v-icon",{attrs:{color:"success","x-small":""}},[t._v(" mdi-check ")]):t._e(),n("v-spacer"),n("v-btn",{attrs:{icon:"","x-small":""},on:{click:function(n){return n.stopPropagation(),t.deleteItem(e)}}},[n("v-icon",[t._v("mdi-delete")])],1)],1)],1)]}))],2)],1)],1),n("v-tab-item",{attrs:{value:t.tabSelections.Second}},[n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{dense:""}},[n("v-card",{attrs:{flat:""}},[n("v-card-title",[t._v(" 未购（"+t._s(t.notYetItems.length)+"） ")])],1)],1),n("v-row",[t._l(t.notYetItems,(function(e){return[n("v-card",{key:e.id,staticClass:"ml-2 mb-2",attrs:{"min-width":"100"}},[n("v-card-text",{staticClass:"pb-1"},[t._v(" "+t._s(e.expect)+": "+t._s(e.name)+" ")]),n("v-card-actions",{staticClass:"pt-1"},[n("v-spacer"),n("v-btn",{attrs:{small:"",color:"success"},on:{click:function(n){return t.purchase(e)}}},[t._v(" 已购 ")])],1)],1)]}))],2)],1),t.alreadyItems.length>0?n("hr"):t._e(),t.alreadyItems.length>0?n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{dense:""}},[n("v-card",{attrs:{flat:""}},[n("v-card-title",[t._v(" 已购（"+t._s(t.alreadyItems.length)+"） ")])],1)],1),n("v-row",[t._l(t.alreadyItems,(function(e){return[n("v-card",{key:e.id,staticClass:"ml-2 mb-2",attrs:{"min-width":"100"}},[n("v-card-text",{staticClass:"pb-1"},[t._v(" "+t._s(e.expect)+":"+t._s(e.name)+" ")]),n("v-card-actions",{staticClass:"pt-1"},[n("v-spacer"),n("v-btn",{attrs:{small:"",color:"error"},on:{click:function(n){return t.cancel(e)}}},[t._v(" 取消 ")])],1)],1)]}))],2)],1):t._e()],1)],1)],1)],1)]},proxy:!0}])}),n("qnote-footer",{scopedSlots:t._u([{key:"footer-content",fn:function(){return[t.tab===t.tabSelections.First?[n("v-container",{staticClass:"py-0",attrs:{fluid:""}},[n("v-row",{attrs:{dense:"",justify:"center"}},[n("v-col",{attrs:{cols:"6"}},[n("v-btn",{attrs:{small:"",block:"",color:t.currentTemplate.items.length===t.planItems.length?"warning":"primary"},on:{click:t.selectAll}},[t._v(" "+t._s(t.currentTemplate.items.length===t.planItems.length?"反选":"全选")+" ")])],1)],1),n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"9"}},[n("v-text-field",{attrs:{label:"名称"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),n("v-col",{attrs:{cols:"3"}},[n("v-text-field",{attrs:{label:"数量",type:"number"},model:{value:t.editedItem.expect,callback:function(e){t.$set(t.editedItem,"expect",t._n(e))},expression:"editedItem.expect"}})],1)],1),n("v-row",{attrs:{justify:"space-between",dense:""}},[n("v-col",{attrs:{cols:"3"}},[n("v-btn",{attrs:{color:"deep-purple",dark:"",block:""},on:{click:t.openTemplateManagementDialog}},[t._v(" 模板 ")])],1),n("v-col",{attrs:{cols:"3"}},[n("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g({attrs:{color:"primary",dark:"",block:"",disabled:t.planItems.length<=0}},a),[t._v(" 开始 ")])]}}],null,!1,1377686052),model:{value:t.confirmStartDialog,callback:function(e){t.confirmStartDialog=e},expression:"confirmStartDialog"}},[n("v-card",[n("v-card-title",[t._v("是否开始？")]),n("v-sheet",[n("div",{staticClass:"pa-4"},t._l(t.planItems,(function(e){return n("v-chip",{key:e.id,staticClass:"mr-2 my-2",attrs:{color:"primary"}},[t._v(" "+t._s(e.name)+" "),n("v-divider",{staticClass:"mx-2",attrs:{vertical:""}}),t._v(" "+t._s(e.expect)+" ")],1)})),1)]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"error"},on:{click:t.start}},[t._v(" 开始 ")]),n("v-btn",{attrs:{text:""},on:{click:function(e){t.confirmStartDialog=!1}}},[t._v(" 取消 ")])],1)],1)],1)],1),n("v-col",{attrs:{cols:"3"}},[n("v-btn",{attrs:{color:"success",dark:"",block:"",disabled:t.editedItem.name.length<=0||t.editedItem.expect<=0},on:{click:t.saveItem}},[t._v(" "+t._s(t.editedItem.id?"修改":"添加")+" ")])],1)],1)],1)]:t._e(),t.tab===t.tabSelections.Second?[n("v-row",{attrs:{justify:"space-between"}},[n("v-col",{attrs:{cols:"4"}},[n("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g({attrs:{dark:"",block:"",color:"deep-purple"}},a),[t._v(" 返回 ")])]}}],null,!1,1184966574),model:{value:t.confirmBackDialog,callback:function(e){t.confirmBackDialog=e},expression:"confirmBackDialog"}},[n("v-card",[n("v-card-title",[t._v("是否返回？")]),n("v-card-text",[t._v("当前购入状态将会被重置")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"error"},on:{click:t.back}},[t._v(" 返回 ")]),n("v-btn",{attrs:{text:""},on:{click:function(e){t.confirmBackDialog=!1}}},[t._v("取消")])],1)],1)],1)],1),n("v-col",{attrs:{cols:"4"}},[n("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g({attrs:{dark:"",block:"",color:"success"}},a),[t._v(" 结束 ")])]}}],null,!1,981853788),model:{value:t.confirmEndDialog,callback:function(e){t.confirmEndDialog=e},expression:"confirmEndDialog"}},[n("v-card",[n("v-card-title",[t._v("是否结束？")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"error"},on:{click:t.saveHistoryAndReturn}},[t._v(" 结束 ")]),n("v-btn",{attrs:{text:""},on:{click:function(e){t.confirmEndDialog=!1}}},[t._v("取消")])],1)],1)],1)],1)],1)]:t._e()]},proxy:!0}])}),n("v-dialog",{attrs:{persistent:""},model:{value:t.templatesDialog,callback:function(e){t.templatesDialog=e},expression:"templatesDialog"}},[n("v-card",{attrs:{flat:""}},[n("v-toolbar",{attrs:{color:"deep-purple",dark:""}},[n("v-toolbar-title",[t._v("模板管理")])],1),n("v-container",{attrs:{fluid:""}},[n("v-tabs",{attrs:{grow:""},model:{value:t.templateTab,callback:function(e){t.templateTab=e},expression:"templateTab"}},[n("v-tab",{attrs:{value:t.templateTabSelections.Add}},[t._v(" 添加为模板 ")]),n("v-tab",{attrs:{value:t.templateTabSelections.Select}},[t._v(" 选择现有模板 ")])],1),n("v-tabs-items",{model:{value:t.templateTab,callback:function(e){t.templateTab=e},expression:"templateTab"}},[n("v-tab-item",{attrs:{value:t.templateTabSelections.Add}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"模板名称","error-messages":t.duplicatedTemplateName},model:{value:t.currentTemplate.name,callback:function(e){t.$set(t.currentTemplate,"name",e)},expression:"currentTemplate.name"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"success",disabled:t.currentTemplate.name<=0},on:{click:t.saveTemplate}},[t._v(" 保存 ")]),n("v-btn",{attrs:{text:""},on:{click:t.closeTempplateManagementDialog}},[t._v(" 关闭 ")])],1)],1),n("v-tab-item",{attrs:{value:t.templateTabSelections.Select}},[n("v-list",[t._l(t.templates,(function(e,a){return[n("v-list-group",{key:a,attrs:{"prepend-icon":t.selectedTemplate&&t.selectedTemplate.name===e.name?"mdi-check":""},on:{click:function(n){return t.selectTemplate(e)}},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-title",[t._v(" "+t._s(e.name)+" ")])]},proxy:!0}],null,!0)},[t._l(e.items,(function(e){return[n("v-list-item",{key:e.id},[n("v-list-item-title",[t._v(" "+t._s(e.name)+": "+t._s(e.expect)+" ")])],1)]}))],2)]}))],2),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"success",disabled:!t.selectedTemplate},on:{click:t.useTemplate}},[t._v(" 使用 ")]),n("v-btn",{attrs:{text:"",color:"error",disabled:!t.selectedTemplate},on:{click:t.deleteTemplate}},[t._v(" 删除 ")]),n("v-btn",{attrs:{text:""},on:{click:t.closeTempplateManagementDialog}},[t._v(" 关闭 ")])],1)],1)],1)],1)],1)],1)],1)},Q=[],W=(n("159b"),n("a434"),function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(g["a"])(this,t),this._items=e,this._timestamp=Date.now(),n&&(this._timestamp=n)}return Object(_["a"])(t,[{key:"toData",value:function(){return{items:this._items.map((function(t){return t.toData()})),timestamp:this._timestamp}}},{key:"time",get:function(){return new Date(this._timestamp).toLocaleString("ja")}},{key:"items",get:function(){return this._items}}],[{key:"fromData",value:function(e){return new t(e.items.map(k.fromData),e.timestamp)}}]),t}()),X={name:"App",data:function(){return{tabSelections:{Zero:0,First:1,Second:2},tab:1,editedItem:new k("",1),templatesDialog:!1,templateTabSelections:{Add:0,Select:1},templateTab:0,selectedTemplate:null,planItems:[],confirmBackDialog:!1,confirmEndDialog:!1,confirmStartDialog:!1,historyDeleteConfirm:!1,histories:[],selectedHistory:null,selectedToDeleteHistoryIndex:null}},created:function(){try{var t=localStorage.getItem("processing");t&&(this.planItems=JSON.parse(t).map(k.fromProcessingData),this.tab=this.tabSelections.Second);var e=localStorage.getItem("histories");this.histories=JSON.parse(e).map(W.fromData)}catch(n){console.log("LocalStorage not available.")}},computed:Object(r["a"])(Object(r["a"])({},Object(s["c"])(["items","templates","currentTemplate"])),{},{appTitle:function(){switch(this.tab){case this.tabSelections.First:return"预购列表";case this.tabSelections.Second:return"购物中";case this.tabSelections.Zero:return"购物记录";default:return null}},duplicatedTemplateName:function(){var t=this;return this.templates.some((function(e){return e.name===t.currentTemplate.name}))?"既存模板，保存将覆盖":null},notYetItems:function(){return this.planItems.filter((function(t){return t.state===c.NotYet}))},alreadyItems:function(){return this.planItems.filter((function(t){return t.state===c.Already}))}}),methods:Object(r["a"])(Object(r["a"])({},Object(s["b"])(["loadTemplates","saveCurrentTemplate","removeTemplate"])),{},{openTemplateManagementDialog:function(){this.templatesDialog=!0},closeTempplateManagementDialog:function(){this.templatesDialog=!1},editItem:function(t){this.editedItem=t.clone()},saveItem:function(){this.editedItem.name.length>0&&this.editedItem.expect>0&&(this.editedItem.id?(this.currentTemplate.updateItem(this.editedItem),this.currentTemplate.saveCurrent()):(this.editedItem.generateId(),this.currentTemplate.appendItem(this.editedItem),this.currentTemplate.saveCurrent()),this.editedItem=new k("",1))},deleteItem:function(t){t&&(this.currentTemplate.removeItem(t),this.currentTemplate.saveCurrent())},selectItem:function(t){this.planItems.some((function(e){return e.id===t.id}))?this.planItems=this.planItems.filter((function(e){return e.id!==t.id})):this.planItems.push(t.clone())},selectAll:function(){var t=this;this.planItems.length!==this.currentTemplate.items.length?this.currentTemplate.items.forEach((function(e){t.planItems.some((function(t){return t.id===e.id}))||t.planItems.push(e.clone())})):this.planItems=[]},saveTemplate:function(){this.saveCurrentTemplate(),this.closeTempplateManagementDialog()},selectTemplate:function(t){this.selectedTemplate&&this.selectedTemplate.name===t.name?this.selectedTemplate=null:this.selectedTemplate=t},useTemplate:function(){this.selectedTemplate&&(this.currentTemplate.update(this.selectedTemplate),this.currentTemplate.saveCurrent(),this.closeTempplateManagementDialog())},deleteTemplate:function(){this.selectedTemplate&&(this.removeTemplate(this.selectedTemplate),this.selectedTemplate=null)},start:function(){this.confirmStartDialog=!1,this.saveProcessing(),this.tab=this.tabSelections.Second},purchase:function(t){t.purchase(),this.saveProcessing()},cancel:function(t){t.cancel(),this.saveProcessing()},saveProcessing:function(){var t=this.planItems.map((function(t){return t.toProcessingData()}));try{localStorage.setItem("processing",JSON.stringify(t))}catch(e){console.log("LocalStorage not available.")}},back:function(){this.confirmBackDialog=!1,this.resetPlanItems(),this.jumpTo(this.tabSelections.First)},jumpTo:function(t){switch(t){case this.tabSelections.First:break;case this.tabSelections.Second:break;default:}this.tab=t},resetPlanItems:function(){this.planItems=[];try{localStorage.removeItem("processing")}catch(t){console.log("LocalStorage not available.")}},saveHistoryAndReturn:function(){var t=this.planItems.map((function(t){return t.clone()}));this.histories.unshift(new W(t)),this.histories.splice(50);try{var e=this.histories.map((function(t){return t.toData()}));localStorage.setItem("histories",JSON.stringify(e))}catch(n){console.log("LocalStorage not available.")}this.resetPlanItems(),this.confirmEndDialog=!1,this.jumpTo(this.tabSelections.Zero)},selectHistory:function(t){console.log(t),t!==this.selectedHistory?this.selectedHistory=t:this.selectedHistory=null},deleteHistory:function(t){this.selectedToDeleteHistoryIndex=t,this.historyDeleteConfirm=!0},cancelDeleteHistory:function(){this.selectedToDeleteHistoryIndex=null,this.historyDeleteConfirm=!1},doDeleteHistory:function(){this.histories.splice(this.selectedToDeleteHistoryIndex,1);try{var t=this.histories.map((function(t){return t.toData()}));localStorage.setItem("histories",JSON.stringify(t))}catch(e){console.log("LocalStorage not available.")}this.selectedHistory=null,this.cancelDeleteHistory()}}),mounted:function(){var t=this;this.$nextTick((function(){t.loadTemplates()}))}},tt=X,et=n("7496"),nt=n("8336"),at=n("b0af"),ot=n("99d9"),it=n("cc20"),rt=n("62ad"),st=n("a523"),ct=n("169a"),lt=n("ce7e"),ut=n("cd55"),mt=n("49e2"),dt=n("c865"),vt=n("0393"),pt=n("132d"),ft=n("8860"),ht=n("56b0"),bt=n("da13"),gt=n("5d23"),_t=n("0fd9"),kt=n("8dd9"),yt=n("2fa4"),St=n("71a3"),Tt=n("c671"),xt=n("fe57"),Mt=n("aac8"),It=n("8654"),Dt=n("71d9"),wt=n("2a7f"),Ct=Object(p["a"])(tt,K,Q,!1,null,null,null),Vt=Ct.exports;N()(Ct,{VApp:et["a"],VBtn:nt["a"],VCard:at["a"],VCardActions:ot["a"],VCardText:ot["b"],VCardTitle:ot["c"],VChip:it["a"],VCol:rt["a"],VContainer:st["a"],VDialog:ct["a"],VDivider:lt["a"],VExpansionPanel:ut["a"],VExpansionPanelContent:mt["a"],VExpansionPanelHeader:dt["a"],VExpansionPanels:vt["a"],VIcon:pt["a"],VList:ft["a"],VListGroup:ht["a"],VListItem:bt["a"],VListItemTitle:gt["b"],VRow:_t["a"],VSheet:kt["a"],VSpacer:yt["a"],VTab:St["a"],VTabItem:Tt["a"],VTabs:xt["a"],VTabsItems:Mt["a"],VTextField:It["a"],VToolbar:Dt["a"],VToolbarTitle:wt["a"]});var Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"app"}},[n("qnote-header",{attrs:{color:"deep-purple",dark:""},scopedSlots:t._u([{key:"header-content",fn:function(){return[n("v-toolbar-title",[t.tab===t.tabSelections.List?[t._v(" 笔记一览 ")]:t.tab===t.tabSelections.Edit?[t._v(" 编辑笔记 ")]:t.tab===t.tabSelections.Process?[t._v(" 笔记详细 ")]:t._e()],2),n("v-spacer"),n("note-type-switch"),t.tab===t.tabSelections.Edit?[n("v-dialog",{attrs:{"max-width":"300",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g({attrs:{icon:""},on:{click:t.openConfigDialog}},a),[n("v-icon",[t._v("mdi-cog")])],1)]}}],null,!1,110127423),model:{value:t.configDialogShown,callback:function(e){t.configDialogShown=e},expression:"configDialogShown"}},[n("v-card",[n("v-toolbar",{attrs:{color:"deep-purple",dark:""}},[n("v-toolbar-title",[t._v(" 设置 ")]),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:t.closeConfigDialog}},[n("v-icon",[t._v("mdi-close")])],1)],1),null!==t.tempMark?n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"设置分隔符"},model:{value:t.tempMark,callback:function(e){t.tempMark=e},expression:"tempMark"}})],1)],1)],1):t._e(),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"success"},on:{click:t.saveConfig}},[t._v("save")]),n("v-btn",{attrs:{text:"",color:"secondary"},on:{click:t.closeConfigDialog}},[t._v(" cancel ")])],1)],1)],1)]:t._e()]},proxy:!0}])}),n("qnote-content",{scopedSlots:t._u([{key:"content",fn:function(){return[t.tab===t.tabSelections.List?[t.memoList?n("v-data-table",{attrs:{items:t.memoList.memos,headers:t.headers,"hide-default-footer":""},scopedSlots:t._u([{key:"item.action",fn:function(e){var a=e.item;return[n("v-btn",{attrs:{small:"",color:"success"},on:{click:function(e){return t.processMemo(a)}}},[t._v(" 开始 ")]),n("v-btn",{staticClass:"ml-2",attrs:{small:"",color:"primary"},on:{click:function(e){return t.editMemo(a)}}},[t._v(" 编辑 ")]),n("v-btn",{staticClass:"ml-2",attrs:{small:"",color:"error"},on:{click:function(e){return t.confirmDeleteMemo(a)}}},[t._v(" 删除 ")])]}}],null,!1,3796038708)}):t._e()]:t._e(),t.tab===t.tabSelections.Edit?[t.editingMemo?n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",[n("v-textarea",{attrs:{"auto-grow":"",rows:"1"},model:{value:t.editingMemo.text,callback:function(e){t.$set(t.editingMemo,"text",e)},expression:"editingMemo.text"}})],1)],1)],1):t._e()]:t._e(),t.tab===t.tabSelections.Process&&t.processingMemo?[n("v-container",{staticClass:"mt-1",attrs:{fluid:""}},[n("v-row",{staticClass:"py-2 px-1"},[t._l(t.notSelectedContent,(function(e,a){return[n("v-chip",{key:a,staticClass:"mr-1 mb-1",attrs:{color:"success",large:""},on:{click:function(n){return t.selectPart(e)}}},[t._v(" "+t._s(e.text)+" ")])]}))],2)],1),t.selectedContent.length>0?[n("v-divider"),n("v-container",{attrs:{fluid:""}},[n("v-row",{staticClass:"py-2 px-1"},[t._l(t.selectedContent,(function(e,a){return[n("v-chip",{key:a,staticClass:"mr-1 mb-1",attrs:{color:"grey",large:""},on:{click:function(n){return t.selectPart(e)}}},[t._v(" "+t._s(e.text)+" ")])]}))],2)],1)]:t._e()]:t._e()]},proxy:!0}])}),n("qnote-footer",{scopedSlots:t._u([{key:"footer-content",fn:function(){return[t.tab===t.tabSelections.List?[n("v-spacer"),n("v-btn",{attrs:{fab:"",color:"success"},on:{click:t.goToAddMemo}},[n("v-icon",[t._v("mdi-plus")])],1),n("v-spacer")]:t.tab===t.tabSelections.Edit?[n("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g({attrs:{fab:"",color:"warning"}},a),[n("v-icon",[t._v("mdi-arrow-left")])],1)]}}]),model:{value:t.backToListConfirmModalShown,callback:function(e){t.backToListConfirmModalShown=e},expression:"backToListConfirmModalShown"}},[n("v-card",{attrs:{"max-width":"500"}},[n("v-card-title",[t._v("是否放弃当前编辑的内容并返回？")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"success"},on:{click:t.backToList}},[t._v("返回")]),n("v-btn",{attrs:{text:"",color:"secondary"},on:{click:function(e){t.backToListConfirmModalShown=!1}}},[t._v(" 取消 ")])],1)],1)],1),n("v-spacer"),n("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g({attrs:{fab:"",color:"success"}},a),[n("v-icon",[t._v("mdi-content-save")])],1)]}}]),model:{value:t.memoSaveModalShown,callback:function(e){t.memoSaveModalShown=e},expression:"memoSaveModalShown"}},[n("v-card",{attrs:{"max-width":"500"}},[n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"输入名称"},model:{value:t.tempName,callback:function(e){t.tempName=e},expression:"tempName"}})],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{disabled:!t.tempName||t.tempName.length<=0,text:"",color:"success"},on:{click:t.saveEditing}},[t._v(" 保存 ")]),n("v-btn",{attrs:{text:"",color:"secondary"},on:{click:function(e){t.memoSaveModalShown=!1}}},[t._v(" 取消 ")])],1)],1)],1)]:t._e(),t.tab===t.tabSelections.Process?[n("v-spacer"),n("v-btn",{attrs:{fab:"",color:"warning"},on:{click:t.returnToList}},[n("v-icon",[t._v("mdi-format-list-bulleted")])],1),n("v-spacer")]:t._e()]},proxy:!0}])}),n("v-dialog",{attrs:{persistent:""},model:{value:t.memoDeleteConfirmModalShown,callback:function(e){t.memoDeleteConfirmModalShown=e},expression:"memoDeleteConfirmModalShown"}},[n("v-card",{attrs:{"max-width":"500"}},[n("v-card-title",[t._v("是否删除？")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"error"},on:{click:t.removeMemo}},[t._v("删除")]),n("v-btn",{attrs:{text:"",color:"secondary"},on:{click:t.closeMemoDeleteConfirmModal}},[t._v(" 取消 ")])],1)],1)],1)],1)},Nt=[],jt=(n("dca8"),n("ac1f"),n("1276"),n("a15b"),"qwertyuiopasdfghjklzxcvbnm1234567890QWERTYUIOPASDFGHJKLZXCVBNM"),Lt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;Object(g["a"])(this,t),this._idLength=e}return Object(_["a"])(t,[{key:"generate",value:function(){for(var t=[],e=0;e<this._idLength;e+=1)t.push(jt[Math.floor(Math.random()*jt.length)]);return t.join("")}}]),t}(),Pt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"、",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];Object(g["a"])(this,t),this._id=null,this._id=e||new Lt(10).generate(),this._name=n,this._text=a,this._separateMark=o,this._timer=null,this._content=i,this._content.length<=0&&this._contentRefresh(),this._autoSaveAsCurrent=!1}return Object(_["a"])(t,[{key:"_contentRefresh",value:function(){this._content=this._text.split(this._separateMark).map((function(t){return{text:t,selected:!1}})),this._autoSaveAsCurrent&&S.setItem(m.CurrentEditingMemo,JSON.stringify(this.toData()))}},{key:"enableAutoSave",value:function(){this._autoSaveAsCurrent=!0}},{key:"disableAutoSave",value:function(){this._autoSaveAsCurrent=!1}},{key:"update",value:function(t){t.name&&(this._name=t.name),t.text&&(this._text=t.text,this._contentRefresh()),t.separateMark&&(this._separateMark=t.separateMark)}},{key:"toData",value:function(){return{id:this._id,name:this._name,content:this._content,separateMark:this._separateMark}}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"text",get:function(){return this._text},set:function(t){var e=this;this._text=t,window.clearTimeout(this._timer),this._timer=window.setTimeout((function(){e._contentRefresh()}),300)}},{key:"separateMark",get:function(){return this._separateMark},set:function(t){var e=this;this._separateMark=t,window.clearTimeout(this._timer),this._timer=window.setTimeout((function(){e._contentRefresh()}),300)}},{key:"content",get:function(){return this._content}}],[{key:"fromData",value:function(e){var n=e.content.map((function(t){return t.text})).join(e.separateMark);return new t(e.id||null,e.name||"",n,e.separateMark||"",e.content||[])}}]),t}(),Et=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(g["a"])(this,t),this._memos=e}return Object(_["a"])(t,[{key:"append",value:function(t){this._memos.push(t),this._save()}},{key:"remove",value:function(t){this._memos=this._memos.filter((function(e){return e.id!==t.id})),this._save()}},{key:"has",value:function(t){return this._memos.some((function(e){return e.id===t.id}))}},{key:"find",value:function(t){return this._memos.find((function(e){return e.id===t.id}))}},{key:"findById",value:function(t){return this._memos.find((function(e){return e.id===t}))}},{key:"createOrUpdate",value:function(t){if(this.has(t)){var e=this.find(t);e.update(t)}else this.append(t);this._save()}},{key:"_save",value:function(){S.setItem(m.MemoList,JSON.stringify(this.toData()))}},{key:"save",value:function(){this._save()}},{key:"toData",value:function(){return this._memos.map((function(t){return t.toData()}))}},{key:"memos",get:function(){return this._memos}}],[{key:"restore",value:function(){var e=S.getItem(m.MemoList);if(e){var n=JSON.parse(e);return new t(n.map((function(t){return Pt.fromData(t)})))}return new t}}]),t}(),At={data:function(){var t={List:1,Edit:2,Process:3};return{tab:t.List,tabSelections:Object.freeze(t),tempMark:null,tempName:"",backToListConfirmModalShown:!1,configDialogShown:!1,editingMemo:null,memoList:null,memoSaveModalShown:!1,headers:[{text:"名称",value:"name",sortable:!1},{text:"操作",value:"action",sortable:!1}],processingMemo:null,memoDeleteConfirmModalShown:!1,memoToDelete:null}},created:function(){this.memoList=Et.restore();var t=S.getItem(m.CurrentEditingMemo),e=S.getItem(m.ProcessingMemoId);if(t){var n=JSON.parse(t);this.editingMemo=Pt.fromData(n),this.editingMemo.enableAutoSave(),this.tab=this.tabSelections.Edit}else if(e){var a=this.memoList.findById(e);a&&(this.processingMemo=a,this.tab=this.tabSelections.Process)}},computed:{notSelectedContent:function(){return this.processingMemo?this.processingMemo.content.filter((function(t){return!t.selected})):[]},selectedContent:function(){return this.processingMemo?this.processingMemo.content.filter((function(t){return t.selected})):[]}},methods:{goToAddMemo:function(){this.tab=this.tabSelections.Edit,this.editingMemo=new Pt,this.tempName=this.editingMemo.name,this.tempMark=this.editingMemo.separateMark,this.editingMemo.enableAutoSave()},backToList:function(){this.backToListConfirmModalShown=!1,this.memoSaveModalShown=!1,S.removeItem(m.CurrentEditingMemo),this.tab=this.tabSelections.List},openConfigDialog:function(){this.configDialogShown=!0,this.tempMark=this.editingMemo.separateMark},saveConfig:function(){this.tempMark&&(this.editingMemo.separateMark=this.tempMark),this.closeConfigDialog()},closeConfigDialog:function(){this.configDialogShown=!1,this.tempMark=null},saveEditing:function(){this.memoList&&(this.editingMemo.name=this.tempName,this.tempName="",this.editingMemo.disableAutoSave(),this.memoList.createOrUpdate(this.editingMemo)),this.backToList()},processMemo:function(t){this.processingMemo=t,S.setItem(m.ProcessingMemoId,t.id),this.tab=this.tabSelections.Process},editMemo:function(t){this.editingMemo=Pt.fromData(t.toData()),this.editingMemo.enableAutoSave(),this.tempName=this.editingMemo.name,this.tempMark=this.editingMemo.separateMark,this.tab=this.tabSelections.Edit},confirmDeleteMemo:function(t){this.memoToDelete=t,this.memoDeleteConfirmModalShown=!0},closeMemoDeleteConfirmModal:function(){this.memoToDelete=null,this.memoDeleteConfirmModalShown=!1},removeMemo:function(){this.memoToDelete&&this.memoList.remove(this.memoToDelete),this.closeMemoDeleteConfirmModal()},returnToList:function(){S.removeItem(m.ProcessingMemoId),this.processingMemo=null,this.tab=this.tabSelections.List},selectPart:function(t){t.selected=!t.selected,this.memoList.save()}}},Ht=At,Jt=n("8fea"),Bt=n("a844"),Ft=Object(p["a"])(Ht,Ot,Nt,!1,null,null,null),$t=Ft.exports;N()(Ft,{VApp:et["a"],VBtn:nt["a"],VCard:at["a"],VCardActions:ot["a"],VCardTitle:ot["c"],VChip:it["a"],VCol:rt["a"],VContainer:st["a"],VDataTable:Jt["a"],VDialog:ct["a"],VDivider:lt["a"],VIcon:pt["a"],VRow:_t["a"],VSpacer:yt["a"],VTextField:It["a"],VTextarea:Bt["a"],VToolbar:Dt["a"],VToolbarTitle:wt["a"]});var qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{persistent:"","max-width":"300px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g({attrs:{icon:""}},a),[n("v-icon",[t._v("mdi-format-list-bulleted-type")])],1)]}}]),model:{value:t.shown,callback:function(e){t.shown=e},expression:"shown"}},[n("v-card",{attrs:{flat:""}},[n("v-toolbar",{attrs:{color:"deep-purple",dark:""}},[n("v-toolbar-title",[t._v(" 切换笔记类型 ")]),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(e){t.shown=!1}}},[n("v-icon",[t._v("mdi-close")])],1)],1),n("v-container",{attrs:{fluid:""}},[n("v-list",[n("v-subheader",[t._v("笔记类型")]),t._l(t.names,(function(e,a){return[n("v-list-item",{key:a,on:{click:function(e){return t.changeNoteType(a)}}},[n("v-list-item-title",[t._v(t._s(e))])],1)]}))],2)],1)],1)],1)},Rt=[],Yt={data:function(){return{shown:!1,names:u}},methods:Object(r["a"])(Object(r["a"])({},Object(s["b"])(["setNoteType"])),{},{changeNoteType:function(t){this.typeIndex=this.setNoteType(t)}})},Zt=Yt,zt=n("e0c7"),Ut=Object(p["a"])(Zt,qt,Rt,!1,null,null,null),Gt=Ut.exports;N()(Ut,{VBtn:nt["a"],VCard:at["a"],VContainer:st["a"],VDialog:ct["a"],VIcon:pt["a"],VList:ft["a"],VListItem:bt["a"],VListItemTitle:gt["b"],VSpacer:yt["a"],VSubheader:zt["a"],VToolbar:Dt["a"],VToolbarTitle:wt["a"]}),a["a"].config.productionTip=!1,a["a"].component("qnote-header",P),a["a"].component("qnote-content",G),a["a"].component("qnote-footer",$),a["a"].component("s-note",Vt),a["a"].component("m-note",$t),a["a"].component("note-type-switch",Gt),new a["a"]({store:T,vuetify:I,render:function(t){return t(h)}}).$mount("#app")}});
//# sourceMappingURL=app.29a56bbe.js.map